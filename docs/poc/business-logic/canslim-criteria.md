# CAN-SLIM 条件詳細

## 概要

CAN-SLIMはウィリアム・オニールが開発した成長株投資の手法。
7つの要素の頭文字を取ったもので、各要素を満たす銘柄を選別する。

---

## CAN-SLIM 各要素

### C - Current Quarterly Earnings（当期四半期利益）

**条件**: 直近四半期のEPS（1株当たり利益）が前年同期比で大幅増加

| 条件 | 判定 | 根拠 |
|------|------|------|
| EPS成長率 ≥ 25% | 合格 | オニールの推奨基準 |
| EPS成長率 ≥ 50% | 優良 | 強い成長を示す |
| EPS成長率 < 25% | 不合格 | 成長が不十分 |

**データソース**: Financial Modeling Prep API または yfinance

**計算式**:
```
EPS成長率(%) = (当期EPS - 前年同期EPS) / |前年同期EPS| × 100
```

**注意点**:
- 前年同期EPSが負の場合、黒字転換は高評価
- 一時的な要因（資産売却等）による増益は除外が望ましい

---

### A - Annual Earnings Growth（年間利益成長）

**条件**: 過去3〜5年間のEPS成長率が安定して高い

| 条件 | 判定 | 根拠 |
|------|------|------|
| 年間EPS成長率 ≥ 25% | 合格 | 持続的な成長力 |
| 3年連続で成長 | 加点 | 安定性の証明 |
| 成長の加速 | 加点 | モメンタム |

**計算式**:
```
年間EPS成長率(%) = CAGR(EPS, 3年または5年)
CAGR = (終値/始値)^(1/年数) - 1
```

**データソース**: 過去の年次決算データ

---

### N - New Products, New Management, New Highs（新製品・新経営陣・新高値）

**条件**: 何か「新しい」要素があり、株価が新高値圏にある

| 条件 | 判定 | 根拠 |
|------|------|------|
| 52週高値の95%以上 | 合格 | 新高値圏 |
| 52週高値更新 | 優良 | ブレイクアウト |
| 52週高値の80%未満 | 不合格 | 上昇余力が弱い |

**計算式**:
```
高値比率(%) = 現在価格 / 52週高値 × 100
```

**定性的要素**（自動判定困難）:
- 新製品・サービスの発表
- 経営陣の刷新
- 新市場への参入

---

### S - Supply and Demand（需給）

**条件**: 出来高が増加しており、需給バランスが良好

| 条件 | 判定 | 根拠 |
|------|------|------|
| 出来高比率 ≥ 1.5 | 合格 | 買い需要の増加 |
| 出来高比率 ≥ 2.0 | 優良 | 強い買い圧力 |
| 出来高比率 < 1.0 | 不合格 | 関心の低下 |

**計算式**:
```
出来高比率 = 直近出来高 / 50日平均出来高
```

**追加考慮点**:
- 発行済株式数が少ない（浮動株比率が低い）方が株価上昇しやすい
- 機関投資家の買い増しは好材料

---

### L - Leader or Laggard（主導株か出遅れ株か）

**条件**: セクター内で相対的に強いパフォーマンスを示す

| 条件 | 判定 | 根拠 |
|------|------|------|
| RS Rating ≥ 80 | 合格 | 上位20%のパフォーマンス |
| RS Rating ≥ 90 | 優良 | 上位10%、真の主導株 |
| RS Rating < 70 | 不合格 | 市場平均以下 |

**RS Rating（Relative Strength Rating）計算式**:
```
RS = 銘柄リターン / 市場リターン × 100（相対強度）
RS Rating = 全銘柄中のパーセンタイル順位
```

**期間**: 過去12ヶ月のパフォーマンスを基準

---

### I - Institutional Sponsorship（機関投資家の保有）

**条件**: 機関投資家が保有しており、増加傾向にある

| 条件 | 判定 | 根拠 |
|------|------|------|
| 機関保有比率 > 0% | 基本条件 | 機関の関心がある |
| 保有機関数の増加 | 加点 | 買い増しの兆候 |
| 有名ファンドの保有 | 加点 | 質の高いスポンサー |

**注意点**:
- 機関保有比率が高すぎる（80%超）と、売り圧力リスク
- 増加トレンドが重要

**データソース**: SEC 13F filings（四半期ごと）

---

### M - Market Direction（市場の方向性）

**条件**: 全体相場が上昇トレンドにある

→ 詳細は [market-analysis.md](./market-analysis.md) を参照

| 条件 | 判定 | 根拠 |
|------|------|------|
| Risk On | 合格 | 市場環境良好 |
| Neutral | 条件付き | 個別銘柄次第 |
| Risk Off | 不合格 | 新規エントリー非推奨 |

---

## スクリーニング条件（PoC実装）

### 必須条件（Must Have）

| 要素 | 条件 | 実装優先度 |
|------|------|-----------|
| C | 四半期EPS成長率 ≥ 25% | Phase 3 |
| A | 年間EPS成長率 ≥ 25% | Phase 3 |
| N | 52週高値の90%以上 | Phase 3 |
| L | RS Rating ≥ 80 | Phase 3 |
| M | Risk On または Neutral | Phase 2 |

### 加点条件（Nice to Have）

| 要素 | 条件 | 実装優先度 |
|------|------|-----------|
| S | 出来高比率 ≥ 1.5 | Phase 3 |
| I | 機関保有比率 > 20% | Phase 4以降 |

---

## データ取得の課題

| 要素 | データソース | 課題 |
|------|-------------|------|
| C, A | yfinance / FMP | 無料APIの制限 |
| N | yfinance | 取得可能 |
| S | yfinance | 取得可能 |
| L | 計算が必要 | 全銘柄のデータが必要 |
| I | SEC 13F | 四半期遅延、取得困難 |
| M | 複数指標 | 取得可能 |

---

## PoC での簡略化

Phase 3（Screener Module）では以下を簡略化:

1. **RS Rating**:
   - 全銘柄計算は困難 → S&P500比較に簡略化
   - `銘柄リターン(12ヶ月) / S&P500リターン(12ヶ月) × 100`

2. **機関保有**:
   - Phase 4以降に延期
   - またはyfinanceの`institutionalOwnership`を使用（精度低）

3. **EPS成長率**:
   - yfinanceの`earningsGrowth`を使用
   - 詳細な四半期比較はFMP API（有料）で対応

---

## 実装コード参照

- Value Object: `backend/src/domain/value_objects/canslim_score.py`（Phase 3で実装予定）
- Domain Service: `backend/src/domain/services/stock_screener.py`（Phase 3で実装予定）

---

## 参考文献

- ウィリアム・オニール『オニールの成長株発掘法』
- IBD (Investor's Business Daily) CAN-SLIM methodology
